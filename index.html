<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>GameMaker in DIDG501</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
  <header class="navbar">
    <nav role="navigation" class="navbar navbar-default">
      <div class="navbar-header">
          <button type="button" data-target="#navbarCollapse" data-toggle="collapse" class="navbar-toggle">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
          </button>
          <a href="#" class="navbar-brand">GameMaker at DIDG501</a>
      </div>
      <!-- Collection of nav links and other content for toggling -->
      <div id="navbarCollapse" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#getting-started">Getting Started</a></li>
              <li><a href="#common-problems">Common Problems</a></li>
              <li><a href="#activities">Activities</a></li>
          </ul>
      </div>
    </nav>
  </header>
  <div class="container">
    <h1>GameMaker in DIDG501</h1>

    <p>Notes for beginner GameMaker tutorials at AUT.</p>

    <p>Announcements and new material appears in the Google Doc: <a target="_blank" href="https://goo.gl/TO6WnS">https://goo.gl/TO6WnS</a></p>

    <h2>Latest changes</h2>

    <p>2017-05-21</p>
    <ul>
      <li>Fixed example movement code (broken in previous update)</li>
      <li>Added notes on reusable components and playtesting</li>
      <li>Added lever and door example</li>
      <li>layout improvements</li>
    </ul>

    <p>2017-05-09</p>
    <ul>
      <li>Troubleshooting characters stuck in walls</li>
      <li>Walking up slopes activity</li>
    </ul>

    <p>2017-05-07</p>
    <ul>
      <li>Added a link to Make A Game With No Experience video series</li>
      <li>Added 'what if my images are blurry'</li>
      <li>Tidied up several code examples</li>
    </ul>

    <p>2017-04-15: Added Simple Menu example</p>

    <h2>About GameMaker</h2>

    <p>We are using GameMaker to make a 2d platform game.</p>

    <p>GameMaker is a popular game-making tool for beginners. It's relatively easy to learn, but can take you all the way to making commercially successful games.</p>

    <p>
      <button class="btn" type="button" data-toggle="collapse" data-target="#collapseExampleGames" aria-expanded="false" aria-controls="collapseExample">
        Can I see some example games made in GameMaker?
      </button>
    </p>
    <div class="collapse" id="collapseExampleGames">
      <div class="card card-block">
        <p>Some locally made GameMaker games:</p>

        <ul>
          <li><a target="_blank" href="http://sergiocornaga.tumblr.com/post/7416495044/you-have-to-go-down-the-hole-2009">Super Go Down the Hole</a> by Sergio Cornaga</li>
          <li><a target="_blank" href="http://www.onegameamonth.com/Liannethy">Narcoleptic Chicken Kid</a> by Lianne Booton</li>
        </ul>

        <p>Some commerically successful GameMaker games:</p>

        <ul>
          <li><a target="_blank" href="http://store.steampowered.com/app/206190/">Gunpoint</a> by Tom Francis – around 700,000 copies sold</li>
          <li><a target="_blank" href="http://store.steampowered.com/agecheck/app/219150/">Hotline Miami</a>
           by Jonatan Söderström and Dennis Wedin – about 2 million copies sold</li>
        </ul>
      </div>
    </div>

    <h2 id="getting-started">Getting Started with GameMaker</h2>

    <h3>1. Watch tutorial videos:</h3>

    <p><a target="_blank" href="https://youtu.be/hzMNunoPd0o">Gamemaker basics</a> by Shaun Spalding</p>
    <p><a target="_blank" href="http://www.yoyogames.com/learn/platform">Platform Game series</a> by Shaun Spalding (this is a series of 12 videos)</p>

    <p>If you want a different perspective:</p>

    <p><span class="text-warning">(NEW)</span> <a target="_blank" href="https://www.youtube.com/playlist?list=PLUtKzyIe0aB2HjpmBhnsHpK7ig0z7ohWw">Make A Game With No Experience</a> by Tom Francis</p>

    <p>Tom's videos are much longer, but go into more detail. I like them a lot!</p>

    <h3>2. If you have a question, Google it.</h3>

    <p>For example:</p>

    <ul>
      <li><a target="_blank" href="http://www.google.com/search?q=gamemaker+menu+screen">gamemaker menu screen</a></li>
      <li><a target="_blank" href="http://www.google.com/search?q=how+to+make+jump+through+platforms+in+gamemaker">how to make jump through platforms in gamemaker</a></li>
      <li><a target="_blank" href="http://www.google.com/search?q=restart+current+level+gamemaker">restart current level gamemaker</a></li>
    </ul>

    <h3>3. Use the built-in help</h3>

    <p>In GameMaker, press F1 to open the help. This includes a reference manual which lists every command you can use while coding in GameMaker.</p>

    <p>While writing code, If you start typing a command then wait for a moment, GameMaker will display a list of commands you might be typing.</p>

    <p>For example, type in 'place' then wait for a second (or press Ctrl) and this will appear:</p>
    <img src="images/autocomplete.png">

    <h3>4. Attend this course!</h3>

    <p>The classes in this course should be helpful if you are finding it difficult to learn from the resources above.</p>

    <h2 id="common-problems">Common Problems</h2>

    <p>We are using GameMaker 1.4.</p>

    <p>
      <button class="btn" type="button" data-toggle="collapse" data-target="#collapseGMatHome" aria-expanded="false" aria-controls="collapseExample">
        How can I get GameMaker 1.4 at home?
      </button>
    </p>
    <div class="collapse" id="collapseGMatHome">
      <div class="card card-block">
        <p>We are using GameMaker 1.4, which only works on Windows computers.</p>

        <p>Due to recent changes, getting GameMaker for free is a little bit tricky. Follow these steps.</p>

      <p>(The trick is to install GameMaker 1.3, which comes with a free licence, then upgrade to GameMaker 1.4, which no longer comes with a free licence as of 8th March 2017.)</p>

      <ul>
        <li>Go to <a target="_blank" href="http://ccm.net/download/download-23641-gamemaker-studio-standard">http://ccm.net/download/download-23641-gamemaker-studio-standard</a></li>
        <li>Click the green download button (It says Download Freeware 172.7 MB)</li>
        <li>Wait for the download to finish.</li>
        <li>Run the installer and then start GameMaker Studio 1.3</li>
        <li>Two windows will pop up. One says “A new version of GameMaker-Studio is available”.</li>
        <li>Choose Remind Me Later - we do not want to update to the new version yet!</li>
        <li>The other window has 3 options. Choose the middle option by entering your email address and clicking ‘register’. Follow the process until you are emailed a licence key. Enter this in the box and continue. Then close GameMaker and reopen it.</li>
        <li>GameMaker will ask you t.o update again. Now you have a licence, so it is OK to update to the latest version.</li>
      </ul>
    </div>
  </div>

  <p>
    <button class="btn" type="button" data-toggle="collapse" data-target="#collapseTipsAtAUT" aria-expanded="false" aria-controls="collapseExample">
     Make GameMaker work faster at AUT <br> Or <br> GameMaker won't open my game at AUT
    </button>
  </p>
<div class="collapse" id="collapseTipsAtAUT">
  <div class="card card-block">
    <h3>Speed up saving, running and backups</h3>
    <p>In GameMaker, go to File -> Preferences.</p>

    <p>Near the bottom, you will see paths for Temp directory, Asset Cache directory, Backup directory and Home directory. Change all of these to a folder on your computer's desktop.</p>
    <p>This will make GameMaker work a lot faster.</p>

    <h3>GameMaker won't open my game???</h3>
    <p>It doesn't like reading games straight from a USB drive.</p>
    <p>Copy your game folder onto the desktop, then open it from there. When you leave the room, remember to copy it back onto your USB drive.</p>
  </div>
</div>

  <p>
    <button class="btn" type="button" data-toggle="collapse" data-target="#collapseBlurryBackgrounds" aria-expanded="false" aria-controls="collapseExample">
     GameMaker makes my images blurry
    </button>
  </p>
  <div class="collapse" id="collapseBlurryBackgrounds">
    <div class="card card-block">
      <h3>Are your images very large (more than 1024 pixels wide or tall?)</h3>

      <p>If any sprite or background in your game is larger than the <b>texture pages size</b>, GameMaker will shrink it so it fits.</p>

      <p>You can increase the texture pages size by going to Global Game Settings (the last item in the list on the left side of the screen), then going to 'Windows' (across the top) then 'Graphics' on the side.</p>

      <p><img src="images/globalgamesettings-windows-graphics.jpg" alt="There is an option to change the texture pages size."></p>

      <p>Change the Size to something larger.</p>

      <p>Please note that it is generally a good idea to avoid very large images in game development. Instead, try to create a scene by arranging several smaller images together.</p>

      <p>There is more information about texture pages in the <a target="_blank" href="https://docs.yoyogames.com/source/dadiospice/001_advanced%20use/more%20about%20backgrounds/texture%20pages.html">GameMaker Texture Pages documentation.</a></p>

      <h3>Other causes of blurry images</h3>

      <p>If you have small images and draw them big, GameMaker deliberately blurs them. You can change this.</p>

      <p>Go to Global Game Settings (the last item in the list on the left side of the screen), then choose 'Windows' (across the top) then 'Graphics' on the side.</p>

      <p>Untick the option <b>Interpolate color between pixels</b>.</p>
    </div>
  </div>

  <p>
    <button class="btn" type="button" data-toggle="collapse" data-target="#collapseStuckInWalls" aria-expanded="false" aria-controls="collapseExample">
     My player (or other characters) get stuck in walls!
    </button>
  </p>
  <div class="collapse" id="collapseStuckInWalls">
    <div class="card card-block">
      <h3>Player or creature gets stuck in walls</h3>

      <p>Is this object animated? If your object is standing next to wall, and then it changes to a sprite that is larger than the sprite it had before, it might expand into the wall and get stuck.</p>

      <p>To fix this, all sprites for the same object should have the same collision size.</p>

      <p>First, Do NOT use 'Precise Collisions' on animated characters. (This makes their collision pixel-perfect, but if they are animated then their pixels will move around and they could get stuck.)</p>

      <p><img src="images/stuck-fix/stuck-fix-sprite-properties.png"></p>

      <p>Secondly, click on 'Modify Mask'. This shows which part of your sprite is used for collisions.</p>

      <p><img src="images/stuck-fix/stuck-fix-mask-properties.png"></p>

      <p>If it is set to 'Automatic', it will crop off the empty areas. But you may need to change it to 'Manual' and make the numbers the same as they are in all the other sprites for this object.</p>

      <h3>What about flipping?</h3>

      <p>If a player or creature gets stuck when it touches a wall and changes direction, it probably has more space on one side of its sprite than the other.</p>

      <p><img src="images/stuck-fix/stuck-when-flipped.png"></p>

      <p>This sprite has more space on one side than the other. If its face hits a wall, then it flips around, its tail will get stuck inside the wall.</p>

      <p>You can fix this in a few ways:</p>

      <ul>
        <li>Adjust the collision mask so it has the same amount of no-collision space on each side</li>
        <li>Move your image into the middle of the sprite</li>
        <li>Use the 'trim' command to trim off the empty space.</li>
      </ul>

      <p><img src="images/stuck-fix/trim.png"></p>
    </div>
  </div>


<h2 id="activities">Workshop Activities</h2>

<h3>Creating Sprites, Objects and Rooms</h3>

<p>You need to be able to do this before you can do any of the other activities.</p>

<p>
   <button class="btn" type="button" data-toggle="collapse" data-target="#collapseSpritesObjectsRooms" aria-expanded="false" aria-controls="collapseExample">
     Tell me about Sprites, Objects and Rooms
   </button>
 </p>
 <div class="collapse" id="collapseSpritesObjectsRooms">
   <div class="card card-block">

    <p>Start a new project.</p>

    <p><img src="./images/first-sprite/1.png"></p>

    <p><img src="./images/first-sprite/2.png"></p>

    <p><img src="./images/first-sprite/3.png"></p>

    <h4>Create a sprite:</h4>
    <ul>
      <li>Right-click on the Sprites label on the left side of the screen and choose Create Sprite.</li>
      <p><img src="./images/first-sprite/5.png"></p>
      <p><img src="./images/first-sprite/6.png"></p>
      <li>This opens up the Sprite Properties</li>
      <li>Change the name to spr_player</li>
      <p><img src="./images/first-sprite/7.png"></p>
      <li>Click ‘Edit Sprite’ to open the Sprite Editor</li>
      <p><img src="./images/first-sprite/8.png"></p>
      <li>Click on the blank page icon to create a sprite</li>
      <p><img src="./images/first-sprite/9.png"></p>
      <li>You can accept the default size of 32 x 32 and click 'OK'</li>
      <p><img src="./images/first-sprite/10.png"></p>
      <li>Double-click on the new empty sprite.</li>
      <p><img src="./images/first-sprite/11.png"></p>
      <li>The Image Editor appears. Use the drawing tools to draw a quick picture</li>
      <p><img src="./images/first-sprite/12.png"></p>
      <li>Click the tick to close the Image Editor</li>
      <p><img src="./images/first-sprite/13.png"></p>
      <li>Close the Sprite Editor as well.</li>
      <p><img src="./images/first-sprite/14.png"></p>
      <li>Now we are back in the <i>Sprite Properties</i> window. Center the sprite by clicking ‘Center’ in the origin box</li>
      <p><img src="./images/first-sprite/15.png"></p>
      <li>Now close this window too by clicking 'ok':</li>
      <p><img src="./images/first-sprite/16.png"></p>
    </ul>

    <h4>Create another sprite:</h4>
    <ul>
      <li>Follow the same process as above</li>
      <li>Name this sprite spr_wall</li>
      <p><img src="./images/first-sprite/17.png"></p>
      <li>Draw an image of a wall.</li>
      <p><img src="./images/first-sprite/18.png"></p>
      <li>Remember to center it.</li>
      <p><img src="./images/first-sprite/15.png"></p>
    </ul>

    <h4>Create objects</h4>

    <ul>
      <li>Right click on ‘Objects’ in the main window and choose Create Object.</li>
      <p><img src="./images/first-sprite/19.png"></p>
      <p><img src="./images/first-sprite/20.png"></p>
      <li>Name the object obj_player</li>
      <p><img src="./images/first-sprite/21.png"></p>
      <li>Click on ‘&lt;no sprite>’ and change it to spr_player</li>
      <p><img src="./images/first-sprite/22.png"></p>
      <p><img src="./images/first-sprite/23.png"></p>
      <p>Close and save your changes</p>
      <p><img src="./images/first-sprite/24.png"></p>
    </ul>
    <p>
    <p>Create another object named obj_wall and change its sprite to spr_wall</p>
    <p><img src="./images/first-sprite/25.png"></p>

    <h4>Create a room</h4>
    <ul>
      <li>Create a room by right-clicking on Rooms and choosing Create Room.</li>
      <p><img src="./images/first-sprite/26.png"></p>
      <p><img src="./images/first-sprite/27.png"></p>
      <p>Rename the room</p>
      <p><img src="./images/first-sprite/28.png"></p>
      <li>In the Room Editor, you can place objects:</li>
      <li> Clicking on the ‘objects tab’</li>
      <p><img src="./images/first-sprite/29.png"></p>
      <li>clicking in the empty area below the tab and choose what object to place</li>
      <p><img src="./images/first-sprite/30.png"></p>
      <li>Click inside the room to place copies of that object.</li>
      <p><img src="./images/first-sprite/31.png"></p>
      <li>Place one obj_player and many obj_walls in your room.</li>
      <p>You can turn on the grid to help you place things:</p>
      <p><img src="./images/first-sprite/32.png"></p>
      <p><img src="./images/first-sprite/33.png"></p>
      <li>Close the room editor</li>
    </ul>

    <h4>Set up Player events</h4>
    <ul>
      <li>Set up the obj_player events and actions:</li>
      <li>Select obj_player so the Object Editor appears again.</li>
      <li>Use the button below the Events section to add a Create event.</li>
      <li>On the right hand side, click on the ‘control’ tab - this will show the code blocks.</li>
      <li>Drag the blank white page icon into the Actions box. This is you saying ‘When this object is created, I want some code to be read.’</li>
      <li>A code editor will pop up - you can close it for now.</li>
      <li>Now create another Event: A step event. You will be asked to choose what kind of step, choose the normal step.</li>
      <li>Once again, drag the blank white page icon into the Actions box. This is you saying: ‘On every step of the game, I want some code to be read’.</li>
      <li>A code editor will pop up again - you can close it for now.</li>
      <li>You can bring the code editor back by clicking on the code action. Make sure you choose the right event first! There are two different code sections, one inside the ‘Create’ event and one inside the ‘Step’ event.</li>
    </ul>

    <p>The Create event happens once when an object is created. The Step event happens over and over again, usually 30 or 60 times each second.</p>
    </div>
  </div>

  <h3>Coding Basics</h3>

  <p>
     <button class="btn" type="button" data-toggle="collapse" data-target="#collapsecodingbasics" aria-expanded="false" aria-controls="collapseExample">
       Show me basic coding examples
     </button>
   </p>
   <div class="collapse" id="collapsecodingbasics">
     <div class="card card-block">

         <h5>A comment</h5>
        <pre><code>
//this does nothing
//lines that start with two slashes are ignored by the computer
//these are called comments and you use them to make helpful notes</code></pre>

<h5>if-statement</h5>

<p>If-statements let you make something only happen in a certain situation. A real life example would be "If I'm hungry, I buy a hamburger."</p>

<p>In the code, the curley brackets {} show what code is connected to the if-statement. All code in the curley brackets will be skipped if the answer to the question is false.</p>

<pre><code>
//if the right arrow key is pressed, move 4 pixels to the right
if (keyboard_check(vk_right))
{
 x = x + 5
}</code></pre>

<h5>if-else-statements</h5>
<p>Do one thing or do the other thing. You have to do one.</p>
<p>Real life example: if I'm at home, make dinner, otherwise buy a hamburger.</p>
<pre><code>
//move fast when hungry, otherwise move slow
if (hungry = 1)
{
  x = x + 10
} else
{
 x = x + 5
}</code></pre>

<h5>Nested if-statements</h5>
<p>Nested means 'one inside another'. A real life example would be:<br>If I'm hungry, then { if I'm at home, make dinner, otherwise buy a hamburger.}</p>
<p>If you say 'no' to the outer if-statement, then you skip over all the code inside its curely brackets.</p>
<pre><code>
//if the right arrow key is pressed, then move. If you are hungry, move fast, otherwise move slow.
if (keyboard_check(vk_right))
{
  if (hungry = 1)
  {
    x = x + 10
  } else
  {
   x = x + 5
  }
}</code></pre>

         <h5>Using a variable</h5>
         <pre><code>
//if the right arrow key is pressed, move 4 pixels to the right
key_right = keyboard_check(vk_right)
if (key_right)
{
 x += 4
}</code></pre>
         <h5>More variables</h5>
         <pre><code>
//if the right arrow key is pressed, move 4 pixels to the right
movespeed = 4
key_right = keyboard_check(vk_right)
if (key_right)
{
 x += movespeed
}</code></pre>
         <h5>Check if a wall is in the way</h5>
         <pre><code>
//gravity: if we can move down 4 pixels without touching an obj_wall, then move down 4 pixels
//note that place_meeting tells us if we would be touching overlapping an object if we moved to a certain place
if (!place_meeting(x,y+4,obj_wall))
{
 y += 4
}</code></pre>


     </div>
  </div>

<h3>Player movement, gravity and jumping</h3>

<p>This is similar to the code in Shaun Spalding's tutorial (linked at the start of this document), but the code here is a bit simpler.</p>

<p>
   <button class="btn" type="button" data-toggle="collapse" data-target="#collapsemovementcode" aria-expanded="false" aria-controls="collapseExample">
     Show me the code!
   </button>
 </p>
 <div class="collapse" id="collapsemovementcode">
   <div class="card card-block">
<pre><code>///put this in the player Create event code
yspeed = 0</code></pre>

<pre><code>///put this in the player Step event code
dir = 0
walkspeed = 20
if (keyboard_check(vk_right))
{
  dir = 1
}
if (keyboard_check(vk_left))
{
  dir = -1
}

//moving sideways
if (dir = 1 or dir = -1)
{
  counter = 0
  while (counter < walkspeed)
  {
    counter++
    if (!place_meeting(x + dir * 1, y, obj_wall))
    {
      x += dir * 1
    }
  }
}

//falling
yspeed += 1

yDir = sign(yspeed)
counter = 0
while (counter < abs(yspeed))
{
  counter++
  if (!place_meeting(x,y+yDir,obj_wall))
  {
    y += yDir
  } else {
    yspeed = 0
  }
}

//jump
if (keyboard_check(vk_space))
{
  if (place_meeting(x, y + 1, obj_wall))
  {
    yspeed = -20
  }
}</code></pre>


     </div>
   </div>

  <h3>Simple animations example</h3>

  <p>You will need to create new sprites for each animation.</p>

  <p>To use this code, you need a sprites called <b>spr_player</b> and <b>spr_player_run</b></p>

  <p>A sprite can be a single image, or a series of images (an animation).</p>

  <p>
     <button class="btn" type="button" data-toggle="collapse" data-target="#collapseanimationcode" aria-expanded="false" aria-controls="collapseExample">
       Show me the code!
     </button>
   </p>
   <div class="collapse" id="collapseanimationcode">
     <div class="card card-block">
<pre><code>///animations (put this in obj_player Step code)
//if left arrow or right arrow is pressed
if (keyboard_check(vk_right) || keyboard_check(vk_left))
{
  //play the running animation
  sprite_index = spr_player_run //this needs to be the name of a sprite
} else
{
  //play the standing animation
  sprite_index = spr_player
}
//direction
if (keyboard_check(vk_left))
{
 image_xscale = -1 //make the sprite flipped
} else
{
  image_xscale = 1 //make the sprite not flipped
}
//To do: if the player is not on the ground, show a falling animation
//To do: if the player is not on the ground
//      show a jumping animation if they are falling upwards (yDir is -1)
//     else show a falling animation
</code></pre>
      </div>
    </div>


    <h3>Simple Main Menu</h3>

    <p>A menu where players can select different options using the keyboard.</p>

    <p>
       <button class="btn" type="button" data-toggle="collapse" data-target="#collapsemenucode" aria-expanded="false" aria-controls="collapseExample">
         Show me how!
       </button>
     </p>
     <div class="collapse" id="collapsemenucode">
       <div class="card card-block">
         <p><b>Create a new Object, called obj_menu</b>. Do not give it a sprite.</p>

         <p><b>Create a new Font, called fnt_menu</b>. You do this much like creating Sprites, Objects and Rooms. You can change the font style and font size.</p>

         <p><b>Create a new Room, called rm_menu</b>. Reorder it so it is the first room, by dragging it up into the first spot in the list of rooms. GameMaker will start it first when you start your game.</p>

         <p><b>Add one obj_menu object into the room</b>.</p>

         <p>Give obj_menu a Create event, a Step (normal step) event and a Draw (Draw GUI) event. Inside each event, add the Code action that we always use.</p>

         <p><img src="images/obj_menu.png"></p>

         <p>If you want to draw anything custom on the screen, you need to add a Draw or Draw GUI event. Code inside these events is allowed to draw.</p>

         <p>The difference between Draw and Draw GUI is that GUI drawing stays 'stuck' to the camera when the camera moves.
         For example, if you wanted to draw a health bar in the corner of the screen, use Draw GUI. The normal Draw action
         draws into the world. For example, if you wanted to show a health bar above an object in the game, you would use
         Draw and that healthbar would scroll out of view as the object scrolled out of view.</p>

<p>Put this in the Create event</p>
  <pre><code>///put this in the menu Create event
menu[0] = "Start"
menu[1] = "Options"
menu[2] = "Quit"

mpos = 0 //which option is selected
</pre></code>

<p>Put this in the Step event</p>
<pre><code>
//arrow keys move through the menu
if (keyboard_check_pressed(vk_down))
{
  mpos = mpos + 1
}
if (keyboard_check_pressed(vk_up))
{
  mpos = mpos - 1
}
//wrap around if we go off the end
if (mpos < 0)
{
  mpos = 2
}
if (mpos > 2)
{
  mpos = 0
}
//menu actions
if (keyboard_check_pressed(vk_enter))
{
  if (mpos = 0) //start
  {
    room_goto_next()
  }
  if (mpos = 2) //quit
  {
    game_end()
  }
}
</pre></code>

<p>Put this in the Draw event</p>
<pre><code>
draw_set_font(fnt_menu)
for (i = 0; i < 3; i++)
{
  if (mpos = i)
  {
    //drawing selected option
    draw_set_colour(c_red)
  } else
  {
    //drawing non-selected option
    draw_set_colour(c_blue)
  }
  draw_text(100, 100+i*60,menu[i])
}
  </code></pre>

  <p><b>Extra for experts:</b></p>

  <p>We have 'hard-coded' the length of the menu. If you add another item to the menu, it won't appear on the screen and you won't be able to select it without tweaking some of the numbers.</p>

  <p>You can instead use the command <b>array_length_1d</b> which counts how many items are in a list. Using this command, you should be able to write code that will adapt to the menu's length automatically.</p>

  <pre><code>menuSize = array_length_1d(menu);
//what now?</code></pre>

        </div>
      </div>


      <h3>Simple Shooting</h3>

      <p>Making one object create other objects can be used for many purposes besides shooting, but we'll use shooting as it is a classic example.</p>

      <p>
         <button class="btn" type="button" data-toggle="collapse" data-target="#collapseshooting" aria-expanded="false" aria-controls="collapseExample">
           Show me how!
         </button>
       </p>
       <div class="collapse" id="collapseshooting">
         <div class="card card-block">

<p>Create a new sprite, spr_shot to represent a shot (or bullet) and then an object named obj_shot with a Create event and Step (normal) event.</p>

<p>Shot Create action:</p>
<pre><code>
dir = 1
</code></pre>

<p>Shot Step action:</p>
<pre><code>
x = x + dir * 10
</code></pre>

<p>The code above lets us change the direction of the shot (left or right) by changing its dir variable to -1 for left or 1 for right.</p>

<p>Add this to obj_player step action:</p>
<pre><code>
//shooting
if (keyboard_check(vk_control))
{
  shot = instance_create(x,y,obj_shot)
  if (dir = -1)
  {
    shot.dir = -1
  }
}
</code></pre>

<p>The code creates a new obj_shot object, and creates a variable 'shot' we can use to change variables inside the shot.</p>

  </div>
</div>

  <h3>General info: Building games with reusable components</h3>

    <p>
      <button class="btn btn-warning" type="button" data-toggle="collapse" data-target="#collapseReusableComponents" aria-expanded="false" aria-controls="collapseReusableComponents">
        What's this about?
      </button>
    </p>
    <div class="collapse" id="collapseReusableComponents">
      <div class="card card-block">
        <p>I've noticed a few people drawing their levels as one huge Photoshop document per level. Thats' OK, and some games do it that way – it's great for making everything look unique. But most games build their levels out of reusable parts.</p>

        <p><img src="images/reusable-components/minecraft.jpg"></p>

        <p>You probably know that Minecraft's world is made out of repeated parts. All the grass in this scene is the same block over and over again. The trees are made of wood blocks stacked on top of each other.</p>

        <p><img src="images/reusable-components/legend-of-zelda.png"></p>

        <p>Classic 2D games like The Legend of Zelda also use repeated tiles in an obvious way. You can see the rocks are repeated. You may also notice that most of the trees are the same square tile.</p>

        <p><img src="images/reusable-components/skyrim-table-1.jpg"></p>

        <p>In 3D games, level designers can rotate and resize the same object so it looks different to the player. Sometimes they use even more clever tricks. In this screenshot, we see a low shelf. But when the player uses a cheat code to look under the floor:</p>

        <p><img src="images/reusable-components/skyrim-table-2.jpg"></p>

        <p>You can see that the "low shelf" was actually just the top of a bookshelf. The level designer has sunk it into the ground to make it look like a new piece of furniture! Much faster than asking the artist to make something new.</p>

        <p>Think about how you can use reusable components in your game to save time.</p>

        <p>There are a lot of great talks about asset reuse in Skyrim and other Bethesda games. Take a look at <a href="https://www.slideshare.net/JoelBurgess/gdc2013-kit-buildingfinal?ref=https://www.pcgamesn.com/fallout-4/bethesda-open-world-design" target="_blank">these slides</a>, starting at slide 128, for an example of how Skyrim's organic looking caves are made quickly and easily by level designers.</p>

      </div>
    </div>

  <h3>General info: Playtesting</h3>

  <p>Playtesting your game is the best and easiest way to make it good! See the slides from my <a href="http://www.matthewgatland.com/playtesting" target="_blank">NZGDC Playtesting talk</a>.</p>

  <p>In short:</p>
  <ul>
    <li>Ask someone to play your game.</li>
    <li>Watch and listen, but don't help them or criticise them.</li>
    <li>Note when they get stuck, confused, or frustrated.</li>
    <li>Fix the problems you find, then playtest again and see if it works better.</li>
  </ul>

 <h3>Walking up slopes</h3>

      <p>Let the player character walk up slopes</p>

      <p>
         <button class="btn" type="button" data-toggle="collapse" data-target="#collapseSlopes" aria-expanded="false" aria-controls="collapseExample">
           Show me how!
         </button>
      </p>
      <div class="collapse" id="collapseSlopes">
        <div class="card card-block">

<p>Create a new sprite, spr_slope and draw a slope.</p>

<p><img src="images/slope-1.png"></p>

<p>Turn on 'Precise collision checking' so it uses pixel perfect collisions.</p>

<p><img src="images/slope-2.png"></p>

<p>Create a new object called <b>obj_slope</b>, change its sprite to <b>spr_slope</b>, and change its parent to <b>obj_wall</b>.</p>

<p><img src="images/slope-3.png"></p>

<p>Your character will now be able to walk down the slope. It will be treated like a wall (so you can stand on it), and it has precise collision checking (so its exact shape matters). However you cannot walk up the slope.</p>

<p>To be able to walk up the slope, we need some new movement code.</p>

<p>A slope is actually a series of very small walls - like stairs. We need to teach our character that if it can't walk forwards, it should try stepping up a little bit instead.</p>

<p><img src="images/slopes.png"></p>

<p>Here is the new sideways movement code. The slope part is in red:</p>
<pre><code>//movement code
if (keyboard_check(vk_right) || keyboard_check(vk_left))
{
  counter = 0
  while (counter < walkspeed)
  {
    counter++
    if (!place_meeting(x + dir * 1, y, obj_wall))
    {
      x += dir * 1
    } <b>else if (!place_meeting(x + dir * 1, y - 1, obj_wall))
    {
      x += dir * 1
      y = y - 1
    }</b>
  }
}
</code></pre>

<p>If you want to walk up even steeper slopes, simply add another copy of the red code, and change the step to 2 pixels:</p>
<pre><code>//movement code
if (keyboard_check(vk_right) || keyboard_check(vk_left))
{
  counter = 0
  while (counter < walkspeed)
  {
    counter++
    if (!place_meeting(x + dir * 1, y, obj_wall))
    {
      x += dir * 1
    } <b>else if (!place_meeting(x + dir * 1, y - 1, obj_wall))
    {
      x += dir * 1
      y = y - 1
    } else if (!place_meeting(x + dir * 1, y - 2, obj_wall))
    {
      x += dir * 1
      y = y - 2
    }</b>
  }
}
</code></pre>

  <p>As usual, you can watch a <a href="https://www.youtube.com/watch?v=1r1rElIiWqw" target="_blank">video tutorial</a> if you want to see a different approach.</p>

    </div>
  </div>


  <h3>A lever or switch that opens and closes a door</h3>

    <p>
      <button class="btn btn-warning" type="button" data-toggle="collapse" data-target="#collapseSwitchAndDoor" aria-expanded="false" aria-controls="collapseSwitchAndDoor">
        Let's do it!
      </button>
    </p>
    <div class="collapse" id="collapseSwitchAndDoor">
      <div class="card card-block">
        <p>OK, there are two parts: A lever and a door.</p>

        <h4>Sprites</h4>

        <p>For both lever and door, we use a sprite with two frames of animation to represent "off" and "on" for the lever and "closed" and "open" for the door.</p>

        <p><img src="images/lever-and-door/lever-sprite.png"></p>

        <p><img src="images/lever-and-door/door-sprite.png"></p>

        <p>Create an empty sprite, called <b>spr_empty</b>, with no image inside. We will use this to make the door stop colliding so the player can walk through it.</p>

        <p><img src="images/lever-and-door/spr_empty.png"></p>

        <h4>Objects</h4>

        <p>Create obj_door and obj_lever. Connect them to the right sprites.</p>

        <p>For the door, make its parent <b>obj_wall</b>. This means the player cannot walk through it:</p>

        <p><img src="images/lever-and-door/obj_door.png"></p>

        <p>Give both objects a <b>Create</b> event and <b>Step</b> event, just like usual.</p>

        <h4>Lever code:</h4>

        <p>The lever changes (from on to off, or from off to on) when you touch it. We don't want the lever to flick constantly when you stand on it, so it only triggers when you <b>start touching it</b> - i.e. you are touching it now, but you were not touching it last time we checked.</p>

        <p>To keep track of this, we need a variable <code>wasTouching</code> which keeps saves of the collision information from the one frame so we can use it in the next frame.</p>

<pre><code>///Lever Create
on = false
wasTouching = false
image_speed = 0 //do not animate
</code></pre>

<pre><code>///Lever Step
isTouching = place_meeting(x,y,obj_player)

//if the player just started touching us
if (isTouching = true and wasTouching = false)
{
  //reverse it - 1 becomes 1, or 0 becomes 1
  on = !on
  //update my image
  //either sprite 0 or sprite 1
  image_index = on
  //open or close the door
  obj_door.open = on
}

wasTouching = isTouching //remember for next time
</code></pre>


        <h4>Door code:</h4>

        <p><code>mask_index</code> sets which sprite is used for collisions with this object. For the door, we change its mask to the empty spr_empty when it is open. The door will still look normal, but it will be invisible for collisions.</p>

        <p>Setting <code>mask_index</code> to -1 tells GameMaker to use the sprite as the mask.</p>

<pre><code>///Door Create
open = false
image_speed = 0 //do not animate
</code></pre>


<pre><code>///Door Step
if (open)
{
  //turn off collisions
  mask_index = spr_empty
} else
{
  //normal collisions
  mask_index = -1
}

//update my image
image_index = open //either 0 or 1
</code></pre>

      </div>
    </div>

  <h3>How to publish and share your game</h3>

    <p>
      <button class="btn btn-warning" type="button" data-toggle="collapse" data-target="#collapseStandalone" aria-expanded="false" aria-controls="collapseStandalone">
        This sounds easy
      </button>
    </p>
    <div class="collapse" id="collapseStandalone">
      <div class="card card-block">

      <h4>Create a stand-alone build</h4>

      <p>In GameMaker, click <b>File</b> (top left corner) then choose <b>Create Application</b></p>

      <p>Under <b>Save as type</b> choose <b>Single runtime executable (*.exe)</b></p>
      
      <p>Click <b>Save</b> to create a single .exe file of your game.</p>

      <h4>Publishing online</h4>

      <p>Use a file sharing service like Dropbox or Google Drive to share your .exe file. You will be able to create a link to the file which you can then post to your blog or email to someone.</p>

      <h4>Taking it further</h4>

      <p>You might want to publish your game on <a href="http://itch.io" target="_blank">itch.io</a>. Itch is an online store and community where you can publish your game. You can make your game free, charge money for it or ask for donations. Here is an example of an itch profile: <a href="https://lorenschmidt.itch.io/">loren schmidt's itch page</a>.</p>

      </div>
    </div>

  <p>That's all so far.</p>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
  </body>
</html>